{
  "dashboard_config": {
    "name": "FlowReader Production Monitoring Dashboard",
    "version": "1.0",
    "refresh_interval": 30,
    "data_retention_days": 30,
    "created": "2024-09-19",
    "description": "Comprehensive monitoring dashboard for FlowReader production environment"
  },
  "data_sources": {
    "monitoring_data": {
      "type": "json",
      "path": "/tmp/flowreader-monitoring/metrics-*.json",
      "format": "timestamped_metrics",
      "update_frequency": 300
    },
    "alert_data": {
      "type": "log",
      "path": "/tmp/flowreader-alert-validation/*.log",
      "format": "structured_log",
      "update_frequency": 60
    },
    "reports": {
      "type": "json",
      "path": "/tmp/flowreader-reports/*.json",
      "format": "summary_reports",
      "update_frequency": 3600
    }
  },
  "panels": [
    {
      "id": "health_overview",
      "title": "System Health Overview",
      "type": "status_grid",
      "position": {"x": 0, "y": 0, "width": 12, "height": 4},
      "metrics": [
        {
          "name": "Application Health",
          "query": "metrics[].health.healthy",
          "aggregation": "latest",
          "thresholds": {
            "good": true,
            "warning": null,
            "critical": false
          },
          "unit": "boolean"
        },
        {
          "name": "Database Connectivity",
          "query": "metrics[].database.healthy",
          "aggregation": "latest",
          "thresholds": {
            "good": true,
            "warning": null,
            "critical": false
          },
          "unit": "boolean"
        },
        {
          "name": "P95 Latency",
          "query": "metrics[].performance.p95_latency_ms",
          "aggregation": "latest",
          "thresholds": {
            "good": 1500,
            "warning": 2000,
            "critical": 2500
          },
          "unit": "ms"
        },
        {
          "name": "Error Rate",
          "query": "metrics[].performance.error_rate_percent",
          "aggregation": "latest",
          "thresholds": {
            "good": 1.0,
            "warning": 5.0,
            "critical": 10.0
          },
          "unit": "%"
        },
        {
          "name": "Security Score",
          "query": "metrics[].security.score",
          "aggregation": "latest",
          "thresholds": {
            "good": 90,
            "warning": 80,
            "critical": 70
          },
          "unit": "/100"
        }
      ]
    },
    {
      "id": "performance_trends",
      "title": "Performance Trends",
      "type": "time_series",
      "position": {"x": 0, "y": 4, "width": 8, "height": 6},
      "metrics": [
        {
          "name": "P95 Latency",
          "query": "metrics[].performance.p95_latency_ms",
          "color": "#FF6B6B",
          "line_width": 2,
          "fill": false
        },
        {
          "name": "P50 Latency",
          "query": "metrics[].performance.p50_latency_ms",
          "color": "#4ECDC4",
          "line_width": 2,
          "fill": false
        },
        {
          "name": "Mean Latency",
          "query": "metrics[].performance.mean_latency_ms",
          "color": "#45B7D1",
          "line_width": 1,
          "fill": true,
          "fill_opacity": 0.2
        }
      ],
      "y_axis": {
        "title": "Response Time (ms)",
        "min": 0,
        "max": "auto"
      },
      "x_axis": {
        "title": "Time",
        "format": "timestamp"
      },
      "legend": {
        "position": "top",
        "show": true
      }
    },
    {
      "id": "error_rate_chart",
      "title": "Error Rate Analysis",
      "type": "time_series",
      "position": {"x": 8, "y": 4, "width": 4, "height": 6},
      "metrics": [
        {
          "name": "Error Rate",
          "query": "metrics[].performance.error_rate_percent",
          "color": "#FF6B6B",
          "line_width": 2,
          "fill": true,
          "fill_opacity": 0.3
        }
      ],
      "y_axis": {
        "title": "Error Rate (%)",
        "min": 0,
        "max": 15
      },
      "thresholds": [
        {
          "value": 5.0,
          "color": "#FFA500",
          "label": "Warning"
        },
        {
          "value": 10.0,
          "color": "#FF0000",
          "label": "Critical"
        }
      ]
    },
    {
      "id": "database_performance",
      "title": "Database Performance",
      "type": "gauge_chart",
      "position": {"x": 0, "y": 10, "width": 6, "height": 4},
      "metrics": [
        {
          "name": "DB Response Time",
          "query": "metrics[].database.response_time_ms",
          "aggregation": "latest",
          "min": 0,
          "max": 2000,
          "thresholds": {
            "good": 500,
            "warning": 1000,
            "critical": 1500
          },
          "unit": "ms"
        },
        {
          "name": "DB Uptime",
          "query": "metrics[].database.healthy",
          "aggregation": "percentage_true_last_hour",
          "min": 0,
          "max": 100,
          "thresholds": {
            "good": 99.5,
            "warning": 99.0,
            "critical": 95.0
          },
          "unit": "%"
        }
      ]
    },
    {
      "id": "security_compliance",
      "title": "Security Compliance",
      "type": "bar_chart",
      "position": {"x": 6, "y": 10, "width": 6, "height": 4},
      "metrics": [
        {
          "name": "HSTS",
          "query": "metrics[].security.hsts",
          "aggregation": "percentage_true_last_hour",
          "color": "#4ECDC4"
        },
        {
          "name": "CSP",
          "query": "metrics[].security.csp",
          "aggregation": "percentage_true_last_hour",
          "color": "#45B7D1"
        },
        {
          "name": "X-Frame-Options",
          "query": "metrics[].security.x_frame_options",
          "aggregation": "percentage_true_last_hour",
          "color": "#96CEB4"
        },
        {
          "name": "XSS Protection",
          "query": "metrics[].security.xss_protection",
          "aggregation": "percentage_true_last_hour",
          "color": "#FECA57"
        },
        {
          "name": "HTTPS",
          "query": "metrics[].security.https",
          "aggregation": "percentage_true_last_hour",
          "color": "#FF9FF3"
        }
      ],
      "y_axis": {
        "title": "Compliance (%)",
        "min": 0,
        "max": 100
      },
      "threshold_line": {
        "value": 95,
        "color": "#FF6B6B",
        "label": "Minimum Compliance"
      }
    },
    {
      "id": "alerts_summary",
      "title": "Alert Activity",
      "type": "table",
      "position": {"x": 0, "y": 14, "width": 8, "height": 4},
      "data_source": "alert_data",
      "columns": [
        {
          "name": "Timestamp",
          "field": "timestamp",
          "width": "20%",
          "format": "datetime"
        },
        {
          "name": "Alert Type",
          "field": "alert_type",
          "width": "25%",
          "format": "text"
        },
        {
          "name": "Status",
          "field": "status",
          "width": "15%",
          "format": "badge",
          "color_map": {
            "triggered": "#FF6B6B",
            "resolved": "#4ECDC4",
            "pending": "#FFA500"
          }
        },
        {
          "name": "Value",
          "field": "value",
          "width": "20%",
          "format": "text"
        },
        {
          "name": "Details",
          "field": "details",
          "width": "20%",
          "format": "text"
        }
      ],
      "pagination": {
        "page_size": 10,
        "show_total": true
      },
      "sorting": {
        "default_column": "timestamp",
        "default_order": "desc"
      }
    },
    {
      "id": "system_metrics",
      "title": "System Metrics",
      "type": "stat_panel",
      "position": {"x": 8, "y": 14, "width": 4, "height": 4},
      "metrics": [
        {
          "name": "Total Requests (24h)",
          "query": "sum(metrics[].performance.total_requests)",
          "format": "number",
          "color": "#4ECDC4"
        },
        {
          "name": "Success Rate",
          "query": "avg(metrics[].performance.successful_requests / metrics[].performance.total_requests * 100)",
          "format": "percentage",
          "decimals": 2,
          "color": "#45B7D1"
        },
        {
          "name": "Avg Response Time",
          "query": "avg(metrics[].performance.mean_latency_ms)",
          "format": "number",
          "unit": "ms",
          "color": "#96CEB4"
        },
        {
          "name": "Monitoring Uptime",
          "query": "percentage_healthy_monitoring_cycles",
          "format": "percentage",
          "decimals": 1,
          "color": "#FECA57"
        }
      ]
    },
    {
      "id": "anomalies_panel",
      "title": "Recent Anomalies",
      "type": "list",
      "position": {"x": 0, "y": 18, "width": 12, "height": 3},
      "data_source": "reports",
      "query": "analysis.anomalies[]",
      "item_template": {
        "title": "{{type}} at {{timestamp}}",
        "subtitle": "P95: {{details.p95_latency}}ms | Errors: {{details.error_rate}}% | Security: {{details.security_score}}/100",
        "color_map": {
          "high_latency": "#FF6B6B",
          "high_error_rate": "#FFA500",
          "health_failure": "#FF0000",
          "database_failure": "#8B0000",
          "security_issue": "#FF4500"
        }
      },
      "max_items": 5,
      "show_empty_message": "No anomalies detected in the last 24 hours âœ…"
    }
  ],
  "alerting": {
    "enabled": true,
    "rules": [
      {
        "name": "Dashboard Data Staleness",
        "condition": "last_update_age > 600",
        "severity": "warning",
        "message": "Dashboard data is stale (last update: {{last_update_age}}s ago)"
      },
      {
        "name": "Monitoring System Down",
        "condition": "monitoring_system_healthy == false",
        "severity": "critical",
        "message": "Monitoring system appears to be down"
      }
    ]
  },
  "themes": {
    "light": {
      "background": "#FFFFFF",
      "panel_background": "#F8F9FA",
      "text_color": "#2C3E50",
      "border_color": "#DEE2E6",
      "grid_color": "#E9ECEF"
    },
    "dark": {
      "background": "#1A1A1A",
      "panel_background": "#2D2D2D",
      "text_color": "#FFFFFF",
      "border_color": "#404040",
      "grid_color": "#333333"
    }
  },
  "export_options": {
    "formats": ["png", "pdf", "json"],
    "schedules": [
      {
        "name": "Daily Summary",
        "format": "pdf",
        "schedule": "0 6 * * *",
        "recipients": ["ops@company.com"]
      },
      {
        "name": "Weekly Report",
        "format": "pdf",
        "schedule": "0 8 * * 1",
        "recipients": ["management@company.com"]
      }
    ]
  },
  "integrations": {
    "grafana": {
      "enabled": false,
      "endpoint": "http://grafana:3000",
      "api_key": "${GRAFANA_API_KEY}",
      "dashboard_uid": "flowreader-monitoring"
    },
    "prometheus": {
      "enabled": false,
      "endpoint": "http://prometheus:9090",
      "metrics_path": "/metrics"
    },
    "elasticsearch": {
      "enabled": false,
      "endpoint": "http://elasticsearch:9200",
      "index_pattern": "flowreader-monitoring-*"
    }
  },
  "query_functions": {
    "latest": "Return the most recent value",
    "avg": "Calculate average over time period",
    "sum": "Calculate sum over time period",
    "min": "Find minimum value over time period",
    "max": "Find maximum value over time period",
    "percentage_true_last_hour": "Percentage of true values in last hour",
    "percentage_healthy_monitoring_cycles": "Percentage of healthy monitoring cycles"
  },
  "time_ranges": {
    "default": "1h",
    "options": [
      {"label": "Last 15 minutes", "value": "15m"},
      {"label": "Last 30 minutes", "value": "30m"},
      {"label": "Last hour", "value": "1h"},
      {"label": "Last 6 hours", "value": "6h"},
      {"label": "Last 12 hours", "value": "12h"},
      {"label": "Last 24 hours", "value": "24h"},
      {"label": "Last 7 days", "value": "7d"},
      {"label": "Last 30 days", "value": "30d"}
    ]
  },
  "annotations": [
    {
      "name": "Deployments",
      "color": "#4ECDC4",
      "source": "git_commits",
      "query": "deployment_events"
    },
    {
      "name": "Alerts",
      "color": "#FF6B6B",
      "source": "alert_data",
      "query": "alert_triggered_events"
    },
    {
      "name": "Maintenance",
      "color": "#FFA500",
      "source": "calendar",
      "query": "maintenance_windows"
    }
  ]
}