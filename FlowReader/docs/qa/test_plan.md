# 测试计划与证据（MVP）

## 覆盖范围
- 构建与脚本：完整性、依赖、生产构建；
- API：健康检查、上传、任务、聊天流、位置、（新增）笔记；
- 交互：阅读页选区→快捷动作→AI 面板→保存为笔记；
- 回归：登录、书库、阅读主流程。

## 关键用例
1) 翻译：选中英文句子 → `/翻译` → 返回贴合语境的中文译文；
2) 辨析：选中多义词周边句子 → `/辨析` → 判断义项并给出理由；
3) 解释：选中段落 → `/解释` → 输出关键点；
4) 提问：选中段落 → `/问` → 回答参考上下文；
5) 保存笔记：从任一回答中保存要点 → 列表可见 → 打开详情；
6) 超长选区：提示并不发起请求；
7) 无上下文：常规对话不受影响。

## 证据命令
```bash
./scripts/verify-setup.sh
npm run build
./scripts/test-api-endpoints.sh
# 若新增 notes 端点，扩展脚本对其做 200/JSON 验证
node api/_spikes/rag-quality-test.ts  # 输出基线与增量对比
npm run test:e2e  # 关键路径烟测
```

## 质量门槛（Gate）
- AC 满足度 100%；
- RAG 评测无退步；
- 无 P0/P1 缺陷阻塞主流程；
- 文档完备，交付可被第三方直接接手。

