# FlowReader MVP 产品需求文档（PRD）

> 版本: v1.0
> 更新: 2025-09-18
> 负责人: PO

## 1. 背景与目标

FlowReader 旨在将被动阅读转变为主动理解与思考。MVP 聚焦“读得懂、不中断、能记忆”，通过上下文感知的 AI 助手在阅读中提供即时帮助。

目标：
- 在不引入音频成本的前提下，完成“文本 AI 伴读”的最小闭环。
- 通过上下文感知 AI 动作（翻译/解释/辨析/提问）显著降低阅读障碍。
- 提供最小可用的笔记基础能力，形成学习沉淀。

## 2. 范围（In/Out of Scope）

In-scope（本期纳入）
- 阅读页选区触发的上下文 AI 快捷动作：翻译、解释、歧义消解、提问。
- AI 对话接口扩展：新增 `intent`、`context`、`targetLang`。
- 笔记基础：创建、列表与查看（最小 UI）。
- RAG 检索质量优化与回归评测方法。
- 部署与运行手册完善，保证可部署性。

Out-of-scope（本期不纳入）
- 音频朗读/TTS、知识网络/社交化、复杂笔记工作流（模板/复习算法）。

## 3. 用户与场景

主要用户
- 知识工作者、学生/研究者、终身学习者。

典型场景
1) 英文资料遇到生词/长句 → 选中 → 翻译/解释 → 继续阅读。
2) 文学或专业语境中的多义词 → 选中句段 → 辨析“字面/隐喻/术语”。
3) 对不理解的段落发问 → AI 基于上下文回答 → 关键点保存为笔记。

## 4. 用户故事（关键）

- 作为读者，我选中英文句子后，希望一键得到中文、贴合语境的译文。
- 作为读者，我对文中某个词的含义不确定，希望快速判断其在该句中的真实含义。
- 作为读者，我想就选中的一段文字向 AI 提问，并得到基于上下文的解释或背景补充。
- 作为读者，我想将 AI 回答中的关键点以最少操作保存为笔记，供日后回顾。

## 5. 需求细则与验收标准（AC）

5.1 上下文 AI 快捷动作
- 选中即显：阅读页出现浮层按钮；快捷键或“/命令”也可触发。
- 传参：选中文本 + 前后文（各≤300字），`intent` 与 `targetLang`。
- 翻译准确：多义词根据上下文消歧；语气/语域合理；≤200字符 p50≤2s。
- 统一面板：所有结果在左侧 AI 面板显示；不影响既有对话。

5.2 笔记基础
- 能从 AI 面板将要点保存为笔记（或复制）；
- 能按书本查看笔记列表并打开详情；
- 不破坏现有阅读与对话流程。

5.3 RAG 质量
- 在固定样本集上，相比当前基线取得可测提升（召回命中/回答相关性）。
- 提供评测脚本与报告示例，作为 Gate 证据。

5.4 兼容与稳定
- 登录、书库、阅读、对话主流程无回归；构建与脚本全部通过。

## 6. 约束

- 成本可控：无 TTS；提示词精简；限制上下文长度与 Top-K。
- 向后兼容：未传 `intent/context` 时行为与当前一致。
- 安全：RLS 生效；仅访问当前用户数据。

## 7. 指标（MVP 验收）

- 理解效率：样章任务主观可读性显著提升（定性评估）。
- 交互频次：阅读会话 AI 互动≥5 次。
- 端到端：上传→阅读→AI→记笔记一气呵成，无致命阻塞。

## 8. 风险与对策

- 回答漂移：固定样本回归；严格 Gate；小步更迭。
- 范围膨胀：仅实现四个 intent；知识面板顺延。
- 性能抖动：限制长度；必要时降级到更快模型。

## 9. 里程碑

- T1-RAG-OPT → T2-CONTEXT-ACTIONS → T3-NOTES-BASE；T4-DEPLOY-PREP 并行。

